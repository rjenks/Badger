<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Badger by rjenks</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Badger</h1>
        <h2>Application for creating unique event badges for attendees using SVG templates</h2>
        <a href="https://github.com/rjenks/Badger" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
            <a name="badger" class="anchor" href="#badger"><span class="octicon octicon-link"></span></a>Badger</h1>

            <p>Application for creating unique event badges for attendees using SVG templates.  Many events use a variety of badges for different attendee types and access levels.  This software allows you to generate personalized badges of a variety of types.  Badges can be printed from attendee data loaded from a CSV file or by polling a web service you provide.  The badges are defined by types.  Each type can have a separate SVG template file to define it's appearance.  The SVG is dynamically modified based on the loaded badge data.  For example the SVG template might include a text element named "FIRST_NAME" which is replaced with the person's first name.  In addition, the software can generate a QR Code and a Barcode based on user data which can be positioned in the SVG template.</p>

            <img src="images/badges.jpg"><br>
            
            <p>The software can either generate PNG images for each badge or print the badges to a printer.  At the moment the software assumes that you are generating 4"x6" badges and has only been tested using a HiTi P720L photo printer. For now, if you want to use another printer or badge size you will need to modify constants in the BadgePrinter.java.</p>

            <h2>
            <a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

            <p>The software will look for a folder called "badgedata" in the current directory.  It expects to find the definition of badge types, SVG templates and necessary pictures here.</p>
            
            <p>There are two modes of operation. From the Options menu you can select "Print Badges" or "Generate PNG Files". "Print Badges" instructs the software to generate badge images in memory and send them directly to a printer. "Generate PNG Files" instructs the software to generate PNG images for each badge and store them in the "badger" folder inside your home directory.</p>
            
            <p>When the software starts up, it is initially stopped.  You can use the "Start Processing" menu option to begin generating badges.  Processing can be stopped at any time and can be restarted.  This is useful if your printer runs out of paper and you want to pause printing until you have added paper.</p>
            
            <p>The project includes a sample configuration in the "sample/badgedata/" folder. You can use this as a reference for creating templates and configurations for your event.</p>
            
            <p>Badge data can be loaded from comma separated value (CSV) files.  MS Excel and many other applications can export CSV files.  The software assumes that the first line of data contains column headers and the remaining lines each contain data for one badge.</p>

            badges.csv
<pre><code>ID_USER,ID_BADGE,TYPE,BADGE_NAME,ORGANIZATION,BARCODE,QRCODE
10000,1000,attendee,Rose,Bad Wolf Club,10000-1000,http://rjenks.github.io/Badger
10001,1001,pre-registered,Marty,Doc Brown Science,10001-1001,http://rjenks.github.io/Badger
10002,1002,registration,Mal,Serenity Logistics,10001-1001,http://rjenks.github.io/Badger
10003,1003,operations,Fry,Planet Express,10003-1003,http://rjenks.github.io/Badger
</code></pre>

            <p>The first badge above for Rose has a TYPE of "attendee" which causes Badger to load a UTF8 encoded property file called "attendee.utf8.properties".</p>

            attendee.utf8.properties
<pre><code>TEMPLATE=attendee
PICTURE=mountain
TYPE_LABEL=Attendee
</code></pre>

            <p>This specifies that it should use the TEMPLATE called "attendee" which causes Badger to load <b>attendee.svg</b>.  It then combines the fields read from both the CSV and the properties file and uses those properties to do replacements in the SVG file, generate a PNG and possibly print the badge.</p>


            


          <p>The software itself knows about several fields:
            <ul>
            <li>TYPE</li>
            <li>BARCODE</li>
            <li>QRCODE</li>
            <li>PICTURE</li>
            <li>ID_BADGE</li>
            <li>ID_USER</li>
            <li>DESCRIPTION</li>
            </ul>
          </p>
            
<p>You can also have as many user defined fields as you like.  The field names are case-sensitive.  TYPE is the only required field.  However if you don’t provide other information it will generate a boring badge.  These fields can match up with named elements in your SVG file.  In your SVG editor (Inkscape or Adobe Illustrator) you will need to name the items to be replaced by the software.</p>

<p>You can have fields in your badge data that do not appear in your template.  They will just be ignored.  You can also have fields in your template that don’t exist in your badge data.  In this case, any placeholder text you may have in your template will remain in the generated badge.</p>

      <p>For example if you want to put someone’s BADGE_NAME at a location in the design:
        <ol>
            <li>In the SVG editor, add a new text block</li>
            <li>Put some dummy text in the text block so that you have a reference to set the font and size.</li>
            <li>Name the text block BADGE_NAME</li>
            <li>Save the template</li>
            <li>Add the BADGE_NAME field to your badge data (CSV or web service)</li>
        </ol>
    </p>

<p>Some of the special fields listed above have special behavior:
    <ul>
        <li>BARCODE - Generates a Code 128 barcode from the badge data field.  This can only contain letters and numbers as Code 128 barcodes cannot encode other characters.  Add a dummy image into your SVG template and name it BARCODE.  The size of the barcode generated will match the size of the placeholder.  You MUST test your barcodes with the barcode scanner you intend to use to make sure the size can be read.  Too small and the reader won’t be able to distinguish the line widths, too large and it won’t fit within the scanner range.</li>

        <li>QRCODE - Generates a QR Code from the badge data field.  This could contain text or more typically a URL.  As with BARCODE, the template should contain an image which will be replaced with the generated QR Code image.  The placeholder should be square and you will need to test to make sure they are the correct size to be read.</li>

        <li>PICTURE - Replaces a template picture with a picture in the badgedata folder.  Similar to the BARCODE and QRCODE fields except that the badge data field specifies the name of a PNG file (without extension) which should be replaced.  For example, if your badge data has PICTURE=vendor, then the software will look for “vendor.png” in the badgedata folder for the replacement.  To allow for per-user pictures, the system will also look to see if a file called ID_USER.png exists in the badgedata folder.  If it does, it will use this image rather than the one specified by the field.  This allows you to override the normal image with a personal image when needed.</li>
    </ul>
</p>
    
    
<p>All other fields are just a simple text replacement.</p>

<p>The TEMPLATE field specifies the name of the SVG template file without the .svg extension.  Instead of being directly specified as a badge field it can also be specified in a badge type properties file. (See below)</p>

<p>The TYPE field specifies which SVG template to use.  For example if you specify TYPE=staff, the software will look for a file called “staff.utf8.properties” in the badgedata folder.  This file can contain any number of name=value lines which represent fields common to that type.  The fields in this file will be added to the fields from the badge data (CSV or web), but will not overwrite existing fields.  This file does not have to exist if all the fields you need are already in the badge data.  This file is assumed to be in UTF8 text format which means that it can contain international characters.</p>

<p>ID_USER, ID_BADGE and DESCRIPTION are used by the GUI application to display what badge is being printed.</p>
            
            
        <h2>
        <a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>SVG Templates and Inkscape</h2>
      
      <p>Inkscape is an open source vector graphic program.  It allows you to edit Scalable Vector Graphic (SVG) files.  SVG files are not images although you can use them in similar ways.  Raster images (PNG, JPG, BMP, etc...) are a series of pixels each having a color. Vector graphics are a collection of drawing operations. Instead of a series of pixel representing a circle, a vector graphic would contain instructions for drawing a circle of a specified radius with line and file colors.  Vector graphics are especially useful when you need to scale a graphic to numerous sizes.  Badge printers are often 300dpi, therefore to print a 4"x6" badge a full resolution you will need a 1200x1800 pixel raster image.  Also because vector formats describe a graphic it means that Badger can change the description before generating a raster image from it.  For example it can replace text or images you have placed and formatted in the graphic.</p>

      <p>In Inkscape when you are adding a text or image that should be replaced with Badger you will need to edit the "Object Properties".  In the dialog, change the "Id" and click the "Set" button.  If you close the dialog without clicking the "Set" button the change won't be saved.</p>
      
      <img src="images/InkscapeObjectProperties.png"><br>

        <h2>
        <a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Fetching Badges from a Web Server</h2>
      
      <p>Badger has the capability of fetching badges from a server.  (This capability is disconnected at the moment, but should be resolved soon. I recently changed the application from a simple command line tool to having a user interface.  In this processes I haven't finished adding the server connection back in.  The code is all there if you're in a hurry.)</p>
      
      <p>The application uses a HTTPS and token/key system to securely fetch badges.  It uses a shared secret in the form of a per-client token which is never sent over the Internet. The system also includes a sequence number which should prevent replay attacks.</p>
      
      <p>At startup Badger will generate a unique Client ID and send this to the server.  If the server has never seen this client it should generate and a new Token and keep a list of Client ID and their associated Tokens. The web server's administrator should then manually retrieve the token and put it in the Badger configuration file.</p>
      
      <p>Other than the initial handshake, every request from Badger to the server will include an MD5 hash of the "CLIENTID-SEQUENCENUM-TOKEN" (The raw token is NEVER sent!).  The server will have the same information and can generate and compare a locally generated MD5 hash with the hash received from Badger.</p>
            
        </section>

        <aside id="sidebar">
          <a href="https://github.com/rjenks/Badger/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/rjenks/Badger/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/rjenks/Badger"></a> is maintained by <a href="https://github.com/rjenks">rjenks</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-48718428-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>